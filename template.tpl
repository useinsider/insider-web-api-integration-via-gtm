___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Insider API Integration",
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,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\u003d\u003d"
  },
  "description": "Insider Web API Integration via GTM.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "partnerCode",
    "displayName": "Partner Name",
    "simpleValueType": true
  },
  {
    "type": "TEXT",
    "name": "partnerId",
    "displayName": "Partner Id",
    "simpleValueType": true
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const injectScript = require('injectScript');
const queryPermission = require('queryPermission');
const log = require('logToConsole');

const url = 'https://' + data.partnerCode + '.api.useinsider.com/ins.js?id=' + data.partnerId;

const onSuccess = () => {
  log('ok');
  data.gtmOnSuccess();
};

const onFailure = () => {
  log('no');
  data.gtmOnFailure();
};

if (queryPermission('inject_script', url)) {
  injectScript(url, onSuccess, onFailure, url);
}


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://*.api.useinsider.com/*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "all"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 08.10.2021 12:54:35


